(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/about.9fe72d73.png"},23:function(e,t,a){e.exports=a.p+"static/media/banner.0aa8cad1.png"},27:function(e,t,a){e.exports=a.p+"static/media/logo.c8d49ad3.png"},30:function(e,t,a){e.exports=a(46)},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),s=a(3),o=a(9),m=a(20),i=a.n(m),u=function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",null,"Powered By"),r.a.createElement("img",{src:i.a,alt:"micronaut",className:"mx-auto d-block about"}))},p=a(2),d={SERVER_URL:"http://localhost:8080"},v=a(11),f=a(1),E=a.n(f),h=a(5),b={};function g(e){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(E.a.mark(function e(t){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.SERVER_URL+t,e.next=3,fetch(a,b);case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e,t){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(E.a.mark(function e(t,a){var n,r,c,l;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(a),r={"Content-Type":"application/json"},c=d.SERVER_URL+t,e.next=5,fetch(c,Object(v.a)({},b,{method:"POST",headers:r,body:n}));case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(e,t){var a=Object(n.useState)(t),r=Object(p.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)(function(){g(e).then(l).catch(function(e){return console.warn(e)})},[]),[c,l]}function j(){var e=w("/pets/random"),t=Object(p.a)(e,1)[0];return t?r.a.createElement("div",{className:"card featured-card"},r.a.createElement(s.b,{to:"/pets/".concat(t.slug)},r.a.createElement("img",{className:"card-img-top",src:"".concat(d.SERVER_URL,"/images/").concat(t.image),alt:t.name})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.name),r.a.createElement(s.b,{to:"/pets/".concat(t.slug),className:"btn btn-primary"},"More Info"))):null}var k={USD:"$",EUR:"\u20ac",GBP:"\xa3"},O=function(e){var t=e.currency,a=e.price;return r.a.createElement("span",{className:"badge badge-secondary"},k[t]||"",a.toFixed(2))},R=a(23),S=a.n(R),C=function(e){var t=e.offer;return t&&t.pet?r.a.createElement("div",{id:"offers"},r.a.createElement("div",{className:"jumbotron jumbotron-fluid offer-jumbotron",style:{backgroundImage:"url(".concat(d.SERVER_URL,"/images/").concat(t.pet.image,")")}},r.a.createElement("div",{className:"container"},r.a.createElement(s.b,{style:{textDecoration:"none",color:"white"},to:"/pets/".concat(t.pet.slug)},r.a.createElement("h1",{className:"display-4"},t.pet.name),r.a.createElement("p",{className:"lead"},t.description),r.a.createElement("h3",null,r.a.createElement(O,{price:t.price,currency:t.currency})),r.a.createElement("p",null,r.a.createElement("small",null,t.pet.vendor," | ",t.pet.type)))))):r.a.createElement("div",{className:"jumbotron jumbotron-fluid offer-jumbotron-fallback",style:{backgroundImage:"url(".concat(S.a,")")}},r.a.createElement("div",{className:"container"}))};var T=function(e){var t=e.message,a=e.level;if(!t)return null;var n="alert alert-".concat(a||"info"," alert-dismissible fade show");return r.a.createElement("div",{className:n,role:"alert"},t,r.a.createElement("button",{className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))};function P(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),s=Object(p.a)(l,2),o=s[0],m=s[1],i=Object(n.useRef)();return Object(n.useEffect)(function(){return i.current=new EventSource("".concat(d.SERVER_URL,"/offers")),i.current.onmessage=function(e){m(JSON.parse(e.data)),c(null)},i.current.onerror=function(){c("Could not load offers"),m(null)},function(){return i.current.close()}},[]),r.a.createElement("div",null,r.a.createElement(C,{offer:o}),r.a.createElement(T,{message:a,level:"warning"}),r.a.createElement("h2",null,"Check out our Popular Pets!"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(j,null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(j,null))))}var U=a(12),L=a(24),V=a(25),D=a(28),_=a(26),I=a(29),W=function(e){var t=e.submit,a=e.expand,n=e.comment,c=e.update,l=e.reply,s=e.expanded;return r.a.createElement("form",{onSubmit:s?t:a,className:"card-body"},s?function(e,t){return r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("label",{htmlFor:"poster"},"Name:")),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",{type:"text",className:"form-control",value:e.poster,onChange:t,name:"poster"})))}(n,c):null,s?function(e,t){return r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("label",{htmlFor:"comment"},"Comment:")),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("textarea",{className:"form-control",value:e.content,onChange:t,name:"content"})))}(n,c):null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("input",{type:"submit",value:l?"Post Reply":"Post Comment",className:"btn ".concat(l?"btn-success":"btn-primary"," float-right")}))))},F=function(e){var t=e.comment,a=e.isThread,n=e.expand,c=e.close,l=e.expanded;return r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("h6",{className:"card-title"},r.a.createElement("b",null,t.poster)," said:"),r.a.createElement("p",{className:"card-text"},t.content)),r.a.createElement("div",{className:"col-sm-2"},a?function(e,t,a){var n=a?"danger":"success",c=a?"-":"+",l=a?t:e;return r.a.createElement("button",{className:"btn btn-".concat(n," comment-btn"),onClick:l},c)}(n,c,l):null)))},A=function(e){var t=e.thread,a=e.expand,n=e.close,c=e.reply,l=e.submitReply,s=e.updateReply;return r.a.createElement("div",null,r.a.createElement("div",{className:"card comment-card"},r.a.createElement(F,{comment:t,expand:a,close:n,expanded:t.expanded,isThread:!0}),t.expanded?r.a.createElement("div",{className:"card replies-card"},t.replies?r.a.createElement("div",{className:"card-title comment-title"},r.a.createElement("i",null,t.replies.length," ",t.replies.length>1?"Replies":"Reply")):r.a.createElement("div",{className:"card-title comment-title"},r.a.createElement("i",null,"Be the first to reply!")),r.a.createElement("ul",{className:"list-group list-group-flush"},t.replies&&t.replies.map(function(e){return r.a.createElement("li",{className:"list-group-item reply-item",key:e.id},r.a.createElement(F,{comment:e}))}),r.a.createElement("li",{className:"list-group-item comment-form-item"},r.a.createElement(W,{submit:l,comment:c,update:s,reply:!0,expanded:!0})))):null))},B=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(D.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={enabled:!1,reply:{content:"",poster:""},threads:[]},a.addReply=function(){var e=Object(h.a)(E.a.mark(function e(t,n){var r,c,l;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.state,c=r.topic,l=r.reply,e.prev=2,e.next=5,y("/comment/".concat(c,"/").concat(n),l);case 5:201===e.sent.status?a.expandThread(n):console.warn("Could not post reply"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t,a){return e.apply(this,arguments)}}(),a.clearReply=function(){return a.setState({reply:{poster:"",content:""}})},a.closeThread=function(e){var t=a.state.threads.map(function(t){return t.id===e&&(t.expanded=!1,t.replies=[]),t});a.setState({threads:t})},a.createThread=function(){var e=Object(h.a)(E.a.mark(function e(t){var n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props.topic,r=a.state.reply,e.prev=3,e.next=6,y("/comment/".concat(n),r);case 6:201===e.sent.status?a.fetchThreads():console.warn("Could not post thread"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.warn(e.t0);case 13:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t){return e.apply(this,arguments)}}(),a.expandForm=function(e){e.preventDefault();var t=a.state.threads.map(function(e){return e.replies=[],e.expanded=!1,e});a.setState({threads:t}),a.clearReply()},a.expandThread=function(){var e=Object(h.a)(E.a.mark(function e(t){var n,r,c,l;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.topic,e.prev=1,e.next=4,g("/comment/".concat(n,"/").concat(t));case 4:r=e.sent,c=a.state.threads,l=c.map(function(e){return e.replies=e.id===t?r.replies:[],e.expanded=e.id===t,e}),a.setState({threads:l}),a.clearReply(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),a.fetchThreads=Object(h.a)(E.a.mark(function e(){var t,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.topic,e.prev=1,e.next=4,g("/comment/".concat(t));case 4:n=e.sent,a.setState({threads:n}),a.clearReply(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.warn(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])})),a.threadIsExpanded=function(){return!a.state.threads.some(function(e){return e.expanded})},a.updateReply=function(e){var t=a.state.reply,n=e.target,r=n.name,c=n.value,l=Object(v.a)({},t,Object(U.a)({},r,c));a.setState({reply:l})},a}return Object(I.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(E.a.mark(function e(){var t,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/comment/health");case 3:t=e.sent,a="UP"===t.status,this.setState({enabled:a}),a&&this.fetchThreads(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.threads,n=t.reply;return t.enabled?r.a.createElement("div",null,r.a.createElement("h2",null,"Join the discussion!"),a.length>0?a.map(function(t){return r.a.createElement(A,{thread:t,key:t.id,expand:function(){return e.expandThread(t.id)},close:function(){return e.closeThread(t.id)},reply:n,submitReply:function(a){return e.addReply(a,t.id)},updateReply:e.updateReply})}):null,r.a.createElement("div",{className:"card",style:{clear:"both",marginTop:"20px"}},r.a.createElement("div",{className:"card-header"},r.a.createElement("b",null,"Start a new discussion!")),r.a.createElement(W,{submit:this.createThread,update:this.updateReply,comment:n,expand:this.expandForm,expanded:this.threadIsExpanded()}))):null}}]),t}(n.Component),J=function(){var e=Object(h.a)(E.a.mark(function e(t){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/mail/health");case 3:a=e.sent,t("UP"===a.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();var M=function(e){var t=e.pet,a=Object(n.useState)(!1),c=Object(p.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(""),m=Object(p.a)(o,2),i=m[0],u=m[1],d=Object(n.useState)(""),v=Object(p.a)(d,2),f=v[0],b=v[1],g=Object(n.useState)(""),N=Object(p.a)(g,2),x=N[0],w=N[1];Object(n.useEffect)(function(){J(s)},[]);var j=Object(n.useCallback)(function(e){return u(e.target.value)},[]),k=Object(n.useCallback)(function(){b("warning"),w("Enter a valid email address")},[]),O=Object(n.useCallback)(function(){var e=Object(h.a)(E.a.mark(function e(a){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,y("/mail/send",{email:i,slug:t.slug});case 4:200===e.sent.status?(u(""),b("success"),w("Email has been sent")):(b("warning"),w("Could not send email")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),[i,t]),R=i.length>0&&i.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i);return l?r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h4",null,"Request Info about ",t.name),r.a.createElement("form",{className:"form-group",onSubmit:R?O:k},r.a.createElement("label",{htmlFor:"inputEmail"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",id:"inputEmail",placeholder:"Enter email",onChange:j,value:i}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else."),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",className:"btn btn-primary ".concat(R?"":"disabled"),value:"Send me info"}))),r.a.createElement(T,{message:x,level:f})):null};var $=function(e){var t=e.match,a=w("/pets/".concat(t.params.slug)),n=Object(p.a)(a,1)[0];return n?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h1",null,n.name),r.a.createElement("h4",null,"Vendor: ",n.vendor),r.a.createElement("p",null,r.a.createElement(s.b,{to:"/pets/vendor/".concat(n.vendor),className:"btn btn-primary"},"More Pets from ",n.vendor)),r.a.createElement(M,{pet:n}),r.a.createElement(B,{topic:n.slug})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("img",{style:{maxWidth:"70%"},src:"".concat(d.SERVER_URL,"/images/").concat(n.image),alt:n.name}))):r.a.createElement("span",null,"Loading...")},G=function(e){return{backgroundImage:"url(".concat(d.SERVER_URL,"/images/").concat(e.image,")")}},H=function(e){var t=e.pet;return r.a.createElement("div",{className:"col-sm pet-card",style:G(t)},r.a.createElement(s.b,{className:"pet-link",to:"/pets/".concat(t.slug)},r.a.createElement("div",{className:"pet-header"},r.a.createElement("h4",null,t.name))))},q=function(e){var t=e.pets;return r.a.createElement("div",{className:"row"},t.map(function(e,t){return r.a.createElement(H,{key:t,pet:e})}))};var Q=function(e){var t=e.pets.reduce(function(e,t,a){var n=Math.floor(a/3);return e[n]||(e[n]=[]),e[n].push(t),e},[]);return r.a.createElement("div",null,t.map(function(e,t){return r.a.createElement(q,{key:t,pets:e})}))};function z(e,t){var a=1===e?"CAT":2===e?"DOG":null;return a?t.filter(function(e){return e.type===a}):t}var K=function(e){var t=e.header,a=e.match,c=e.pets,l=Object(n.useState)(1),s=Object(p.a)(l,2),m=s[0],i=s[1];return r.a.createElement(o.a,{exact:!0,path:a.url,render:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-4"},t||"Pets"))),r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link ".concat(1===m?"active":""),onClick:function(){return i(1)}},"Cats")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link ".concat(2===m?"active":""),onClick:function(){return i(2)}},"Dogs"))),r.a.createElement(Q,{pets:z(m,c)}))}})};var X=function(e){var t=e.match,a=w("/pets",[]),n=Object(p.a)(a,1)[0];return r.a.createElement(K,{pets:n,match:t})};var Y=function(e){var t=e.match,a=t.params.vendor,n=w("/pets/vendor/".concat(a),[]),c=Object(p.a)(n,1)[0];return r.a.createElement(K,{header:"Pets from ".concat(a),match:t,pets:c})};var Z=function(e){var t=e.vendor,a=t.pets&&t.pets.length>0?t.pets[0].image:"missing.png",n="".concat(d.SERVER_URL,"/images/").concat(a),c="/pets/vendor/".concat(t.name);return r.a.createElement("div",{className:"card vendor-card"},r.a.createElement(s.b,{to:c},r.a.createElement("img",{alt:t.name,className:"card-img-top",src:n})),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.name),r.a.createElement("p",{className:"card-text"},"Pets: ",t.pets?t.pets.length:0),r.a.createElement(s.b,{to:c,className:"btn btn-primary"},"See all Pets")))},ee=function(e){var t=e.vendors;return r.a.createElement("div",null,t.map(function(e,t){return r.a.createElement(Z,{key:t,vendor:e})}))};function te(){var e=w("/vendors",[]),t=Object(p.a)(e,1)[0];return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-4"},"Vendors"))),r.a.createElement(ee,{vendors:t}))}var ae=a(27),ne=a.n(ae),re=(a(45),function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(s.b,{to:"/",className:"navbar-brand"},r.a.createElement("img",{src:ne.a,className:"micronaut-logo",alt:"micronaut"})," ","Micronaut PetStore"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/pets",className:"nav-link"},"Pets")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/vendors",className:"nav-link"},"Vendors")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/about",className:"nav-link"},"About"))))),r.a.createElement("div",{className:"container"},r.a.createElement(o.a,{exact:!0,path:"/",component:P}),r.a.createElement(o.a,{exact:!0,path:"/pets",component:X}),r.a.createElement(o.a,{exact:!0,path:"/pets/:slug",component:$}),r.a.createElement(o.a,{exact:!0,path:"/pets/vendor/:vendor",component:Y}),r.a.createElement(o.a,{exact:!0,path:"/vendors",component:te}),r.a.createElement(o.a,{exact:!0,path:"/about",component:u}))))}),ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function le(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(r.a.createElement(re,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");ce?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):le(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):le(e)})}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.7fb62f1a.chunk.js.map